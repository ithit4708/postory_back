<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.jungsuk_2_1.postory.dao.PostDao">
    <insert id="createPost">

    </insert>

    <select id="getPostsByChnlUri" parameterType="map" resultType="PostDto">
            SELECT p.*
            FROM post AS p
            INNER JOIN channel AS c ON p.CHNL_ID = c.CHNL_ID
            WHERE c.CHNL_URI = #{chnlUri}
            <choose>
                <when test="orderMethod == 'latest'">
                    ORDER BY p.POST_PBLC_DTM DESC
                </when>
                <when test="orderMethod == 'popularity'">
                    ORDER BY p.POST_LIK_CNT DESC
                </when>
            </choose>
            LIMIT #{pageSize} OFFSET #{offset}
        </select>
</mapper>